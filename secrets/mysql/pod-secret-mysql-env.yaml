apiVersion: v1
kind: Pod
metadata:
  name: pod-secret-mysql
  labels:
    app: testdb
  namespace: ns-mysql
spec:
  nodeName: ubuntu22-server03
  restartPolicy: OnFailure
  containers:
  - name: mysql
    image: mysql:5.7
    imagePullPolicy: IfNotPresent
    env:
    - name: MYSQL_ROOT_PASSWORD
      valueFrom:
        secretKeyRef:
          name: mysql-secret
          key: root.pass
    - name: MYSQL_DATABASE
      valueFrom: 
        secretKeyRef: 
          name: mysql-secret
          key: db.name
    - name: MYSQL_USER
      valueFrom: 
        secretKeyRef: 
          name: mysql-secret
          key: db.user
    - name: MYSQL_PASSWORD
      valueFrom: 
        secretKeyRef: 
          name: mysql-secret
          key: db.pass
